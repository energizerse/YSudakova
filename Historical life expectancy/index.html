<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <script src="libs.js"></script>
  <script src="ancestry.js"></script>
</head>
<body>

  <script>

var ancestry = JSON.parse(ANCESTRY_FILE);


function age(p) {
    return p.died - p.born;
}

function average(array) {
    function plus(a, b) {
        return a + b;
    }
    if (array.length !== 0) return array.reduce(plus) / array.length;
}

function getStatistic() {

    //Calculate array of centuries (+sorting & +filtering by unique value):
    var centuries = ancestry.map(function(person) {
        return Math.ceil(person.died / 100);
    }).sort().filter(function onlyUnique(value, index, self) {
        return self.indexOf(value) === index;
    });


    //Bulding array of object {century, lifetimes} and filling only first property century:
    var mas = [{
        century: centuries[0],
        lifetimes: []
    }];
    var l = centuries.length;
    for (i = 1; i < l - 1; i++) {
        if (centuries[i] > mas[mas.length - 1].century) {
            mas.push({
                century: centuries[i],
                lifetimes: []
            });
            l++;
        }
    }

    //Filling lifetimes arrays of ages for each century:
    for (var j in ancestry) {
        for (k = 0; k < mas.length; k++) {
            if ((Math.ceil(ancestry[j].died / 100)) == mas[k].century) {
                mas[k].lifetimes.push(age(ancestry[j]));
            }
        }

    }


    //Building result:
    var resMas = [];
    for (var r in mas) {
        var s = '';
        s = mas[r].century + ": " + average(mas[r].lifetimes);
        resMas.push(s);
    }


    return resMas;
}


console.log(getStatistic());
// â†’ 16: 43.5
//   17: 51.2
//   18: 52.8
//   19: 54.8
//   20: 84.7
//   21: 94


  </script>

   <script src="test.js"></script>
</body>
</html>